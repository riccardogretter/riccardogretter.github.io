<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
</head>
<body>
    <input type="password" id="password" placeholder="Enter your password">
    <button id="button">Login</button>
    <div id="alert" style="display: none; color: red;">Incorrect password</div>

    <!-- Include the SHA-1 script from a CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsSHA/3.2.0/sha1.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var passwordInput = document.querySelector('#password');
            var loginButton = document.querySelector('#button');
            var alertDiv = document.querySelector('#alert');

            if (passwordInput && loginButton && alertDiv) {
function login(secret) {
	var hash = sha1(secret)
	var url = hash + '/index.html'
	var alert = document.querySelectorAll('[data-id="alert"]')

	var request = new XMLHttpRequest()
	request.open('GET', url, true)

	request.onload = function () {
		if (request.status >= 200 && request.status < 400) {
			window.location = url
		} else {
			parent.location.hash = hash
			alert[0].style.display = 'block'
			password[0].setAttribute('placeholder', 'Incorrect password')
			password[0].value = ''
		}
	}
	request.onerror = function () {
		parent.location.hash = hash
		alert[0].style.display = 'block'
		password[0].setAttribute('placeholder', 'Incorrect password')
		password[0].value = ''
	}
	request.send()
}

button[0].addEventListener('click', function () {
	login(password[0].value)
})
        });
    </script>
</body>
</html>
