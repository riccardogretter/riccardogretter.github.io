<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
</head>
<body>
    <input type="password" id="password" placeholder="Enter your password">
    <button id="button">Login</button>
    <div id="alert" style="display: none; color: red;">Incorrect password</div>

    <!-- Include the SHA-1 script from a CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsSHA/3.2.0/sha1.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var password = document.querySelector('#password');
            var button = document.querySelector('#button');
            var alert = document.querySelector('#alert');

            if (password && button && alert) {
                function login(secret) {
                    // Initialize jsSHA and compute the SHA-1 hash
                    var shaObj = new jsSHA("SHA-1", "TEXT");
                    shaObj.update(secret);
                    var hash = shaObj.getHash("HEX");

                    // Construct the URL
                    var url = hash + '/index.html';

                    var request = new XMLHttpRequest();
                    request.open('GET', url, true);

                    function handleError() {
                        alert.style.display = 'block';
                        password.setAttribute('placeholder', 'Incorrect password');
                        password.value = '';
                    }

                    request.onload = function () {
                        if (request.status >= 200 && request.status < 400) {
                            window.location = url;
                        } else {
                            handleError();
                        }
                    };

                    request.onerror = handleError;

                    request.send();
                }

                button.addEventListener('click', function () {
                    var secret = password.value;
                    login(secret);
                });
            } else {
                console.error('Required elements not found in the DOM.');
            }
        });
    </script>
</body>
</html>
