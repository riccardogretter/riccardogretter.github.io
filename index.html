<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
</head>
<body>
    <input type="password" data-id="password" placeholder="Enter your password">
    <button data-id="button">Login</button>
    <div data-id="alert" style="display: none; color: red;">Incorrect password</div>

    <!-- Include the SHA-1 script from a CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsSHA/3.2.0/sha1.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var password = document.querySelectorAll('[data-id="password"]');
            var button = document.querySelectorAll('[data-id="button"]');
            var alert = document.querySelectorAll('[data-id="alert"]');

            if (password.length > 0 && button.length > 0 && alert.length > 0) {
                function login(secret) {
                    var hash = new jsSHA("SHA-1", "TEXT");
                    hash.update(secret);
                    var hashedSecret = hash.getHash("HEX");

                    var url = hashedSecret + '/index.html';

                    var request = new XMLHttpRequest();
                    request.open('GET', url, true);

                    function handleError() {
                        parent.location.hash = hashedSecret;
                        alert[0].style.display = 'block';
                        password[0].setAttribute('placeholder', 'Incorrect password');
                        password[0].value = '';
                    }

                    request.onload = function () {
                        if (request.status >= 200 && request.status < 400) {
                            window.location = url;
                        } else {
                            handleError();
                        }
                    };

                    request.onerror = handleError;

                    request.send();
                }

                button[0].addEventListener('click', function () {
                    var secret = password[0].value;
                    login(secret);
                });
            } else {
                console.error('Required elements not found in the DOM.');
            }
        });
    </script>
</body>
</html>
